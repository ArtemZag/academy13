@using System.Web.Optimization
@using BinaryStudio.PhotoGallery.Web.ViewModels
@using PerpetuumSoft.Knockout
@*@model List<PhotoViewModel>*@

@*@{
    KnockoutContext<List<PhotoViewModel>> ko = Html.CreateKnockoutContext();    
}*@

<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>@ViewBag.Title</title>
        @Styles.Render("~/bundles/styles/bootstrap")
        @Styles.Render("~/bundles/styles/opentip")
        @Styles.Render("~/Content/auth-page.css")
        @Styles.Render("~/Content/verticalResizer.css")
        
        
        @Scripts.Render("~/bundles/scripts/jquery")
        @Scripts.Render("~/bundles/scripts/jquery.validate")
        @Scripts.Render("~/bundles/scripts/opentip")
        
        @Scripts.Render("~/Scripts/Helpers/animation.js")
        @Scripts.Render("~/Scripts/Helpers/verticalResizer_Module.js")
    </head>
    <body>
        <div id="full-screen-shadow"></div>
        <div id="wrapper">
            <div id='myGallery' class='rtg-gallery'>
                <div class='rtg-images'>
                    @*	                @using (KnockoutForeachContext<PhotoViewModel> photos = ko.Foreach(it => it))
                    {
                        <div class="photoContainer invisible">
                            <img @photos.Bind.Attr("src", photo => photo.PhotoSource)/>
                        </div>
                    }*@
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/31.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/30.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/32.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/33.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/34.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/35.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/36.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/37.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/38.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/39.jpg'/>
                    </div>
                     <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/40.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/41.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/42.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/43.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/44.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/45.jpg'/>
                    </div>
                    <div class="photoContainer">
                        <img src='/data/photos/3/10/thumbnails/46.jpg'/>
                    </div>
    
                </div>
            </div>
        </div>
        @RenderBody() 
    </body>
</html>
<script type="text/javascript">
    $("#wrapper").css("height", $(window).height() - 15);

    $(window).on('resize', function () {
        $("#wrapper").css("height", $(window).height() - 15);
    });

    $('#myGallery').rtg({
        imageWidth: 315,
        spacing: 10,
        categories: false,
        lightbox: false,
        center: false,
    });
    var didit = false;
    var done = false;
    setTimeout(function () {
        var bWidth = $('.rtg-images').width();
        var resizeStep = function () {

            if (bWidth != $('.rtg-images').width()) {
                didit = true;
                $('#steps > p').html('<span class="step">Step 2:</span> Awesome. Now click a category and watch it sort!');
                $('.rtg-categories > li > a').on('click', function (e) {
                    if (!done) {
                        $('#steps > p').html('<span class="step">Step 3:</span> This is an easy one. Click an image!');
                    }

                    $('#myGallery img').on('click', function (e) {
                        $('#steps > p').html('<span class="step">Great Job. <a href="http://codecanyon.net/item/responsive-tile-gallery/3290154">Check out Responsive Tile Gallery on CodeCanyon!</a></span>');
                        done = true;
                    });
                });
            } else {
                if (didit !== true) {
                    $('#steps > p').html('<span class="step">Still Step 1:</span> Resize the width a little more. Trust me...');
                }
            }
            bWidth = $('.rtg-images').width();
        };
        var stepTimer;
        $(window).resize(function () {
            if (didit === false) {
                clearTimeout(stepTimer);
                stepTimer = setTimeout(resizeStep, 200);
            }
        });
    }, 1000);


    //$(document).ready(function () {
    //    verticalResizer_Module();
    //});
</script>